<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Forgot Password</title>
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
<link href="css/responsive.css" rel="stylesheet">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
<link rel="icon" href="images/favicon.png" type="image/x-icon">

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

<style>
    .alert {
        margin-top: 15px;
        transition: opacity 0.3s ease-in-out;
    }
    .is-invalid {
        border-color: #dc3545 !important;
    }
    .is-valid {
        border-color: #28a745 !important;
    }
    .spinner-border {
        display: none;
        margin-left: 10px;
        width: 1.2rem;
        height: 1.2rem;
        border-width: 0.2em;
    }
    .btn-primary:disabled {
        opacity: 0.65;
    }
</style>

</head>
<body>
    <div class="container">
        <div class="row justify-content-center mt-5">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header text-center">
                        <h3>Forgot Password</h3>
                    </div>
                    <div class="card-body">
                        <div id="message" class="alert d-none" role="alert"></div>

                        <form id="forgotPasswordForm">
                            <p class="text-center">Enter your email address to receive a password reset link.</p>
                            <div class="form-group">
                                <label for="email">Email Address</label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                            <button type="submit" class="btn btn-primary btn-block" id="submitBtn">
                                Send Reset Link
                                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                            </button>
                            <div class="text-center mt-3">
                                <a href="login.html" class="text-primary">Back to Login</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="main-footer">
        <div class="auto-container">
            <div class="widgets-section">
                <div class="row clearfix">

                    <div class="big-column col-lg-6 col-md-12 col-sm-12">
                        <div class="row clearfix">

                            <div class="footer-column col-lg-7 col-md-6 col-sm-12">
                                <div class="footer-widget logo-widget">
                                    <div class="logo">
                                        <a href="index-2.html"><img src="images/footer-logo.png" alt="" /></a>
                                    </div>
                                    <div class="text">Stella Orr'e is a WordPress theme to build Interior websites. It has good features and you will love.</div>
                                    <ul class="social-icons">
                                        <li><a href="#"><span class="fab fa-facebook-f"></span></a></li>
                                        <li><a href="#"><span class="fab fa-linkedin-in"></span></a></li>
                                        <li><a href="#"><span class="fab fa-twitter"></span></a></li>
                                        <li><a href="#"><span class="fab fa-google-plus-g"></span></a></li>
                                    </ul>
                                </div>
                            </div>

                            <div class="footer-column col-lg-5 col-md-6 col-sm-12">
                                <div class="footer-widget links-widget">
                                    <h2>Quick links</h2>
                                    <div class="widget-content">
                                        <ul class="list">
                                            <li><a href="Anout.html">About Memusi</a></li>
                                            <li><a href="privacy-policy.html">Privacy Policy</a></li>
                                            <li><a href="terms-conditions.html">Terms & Conditionis</a></li>
                                            <li><a href="faq.html">Faq</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="big-column col-lg-6 col-md-12 col-sm-12">
                        <div class="row clearfix">

                            <div class="footer-column col-lg-5 col-md-6 col-sm-12">
                                <div class="footer-widget contact-widget">
                                    <h2>Contact Info</h2>
                                    <div class="widget-content">
                                        <a href="tel: +254708773943" class="contact-number"> +254708773943</a>
                                        <ul>
                                            <li>00100, Kitengela, Nairobi</li>
                                            <li>Email :<a href="carolkirgotty@gmail.com"> carolkirgotty@gmail.com</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="footer-column col-lg-7 col-md-6 col-sm-12">
                                <div class="footer-widget newsletter-widget">
                                    <h2>Newsletter</h2>
                                    <div class="text">Get Special offers & Discounts</div>
                                    <div class="newsletter-form">
                                        <form method="post" action="#">
                                            <div class="form-group">
                                                <input type="email" name="email" value="" placeholder="Enter your email address" required>
                                                <button type="submit" class="theme-btn btn-style-one"><span class="txt">Subscribe</span></button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>

            <div class="footer-bottom clearfix">
                <div class="pull-left">
                    <div class="copyright"><a href="#">MIKE PRODUCTIONS</a></div>
                </div>
                <div class="pull-right">
                    <a href="#">MIKE PRODUCTIONS</a>
                </div>
            </div>

        </div>
    </footer>

</div>
<div class="scroll-to-top scroll-to-target" data-target="html"><span class="fa fa-angle-up"></span></div>

<div id="search-popup" class="search-popup">
    <div class="close-search theme-btn"><span class="flaticon-cancel"></span></div>
    <div class="popup-inner">
        <div class="overlay-layer"></div>
        <div class="search-form">
            <form method="post" action="#">
                <div class="form-group">
                    <fieldset>
                        <input type="search" class="form-control" name="search-input" value="" placeholder="Search Here" required >
                        <input type="submit" value="Search Now!" class="theme-btn">
                    </fieldset>
                </div>
            </form>

            <br>
            <h3>Recent Search Keywords</h3>
            <ul class="recent-searches">
                <li><a href="index-4.html">Murkell Tv</a></li>
                <li><a href="index-3.html">Wines</a></li>
                <li><a href="podcast.html">Podcast</a></li>
                <li><a href="blog.html">Business</a></li>
                <li><a href="shop.html">Shops</a></li>
            </ul>

        </div>

    </div>
</div>

<script src="js/jquery.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/jquery-ui.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.fancybox.js"></script>
<script src="js/isotope.js"></script>
<script src="js/owl.js"></script>
<script src="js/wow.js"></script>
<script src="js/appear.js"></script>
<script src="js/scrollbar.js"></script>
<script src="js/script.js"></script>

<!-- Firebase Auth Script -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getAuth, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

    // Your Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyDbugll6RRXT-UPZ4ipHZD-ilXLOIo7oT8",
        authDomain: "mcmemuci-7943c.firebaseapp.com",
        projectId: "mcmemuci-7943c",
        storageBucket: "mcmemuci-7943c.appspot.com",
        messagingSenderId: "614792317536",
        appId: "1:614792317536:web:14f371fac44b65bf8dd105"
    };

    // Initialize Firebase
    const firebaseApp = initializeApp(firebaseConfig);
    const auth = getAuth(firebaseApp);

    // Helper function to display messages
    function showMessage(elementId, message, type = 'danger') {
        const messageDiv = document.getElementById(elementId);
        if (messageDiv) {
            messageDiv.textContent = message;
            messageDiv.className = `alert alert-${type}`;
            messageDiv.classList.remove('d-none');
            
            if (type !== 'success') {
                setTimeout(() => {
                    messageDiv.classList.add('d-none');
                    messageDiv.textContent = '';
                }, 5000);
            }
        }
    }

    // Form submission handler
    document.getElementById('forgotPasswordForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const email = document.getElementById('email').value;
        const submitBtn = document.getElementById('submitBtn');
        const spinner = submitBtn.querySelector('.spinner-border');
        
        // Show loading state
        submitBtn.disabled = true;
        spinner.style.display = 'inline-block';
        
        try {
            await sendPasswordResetEmail(auth, email);
            
            showMessage('message', 'Password reset email sent! Please check your inbox.', 'success');
            document.getElementById('email').classList.add('is-valid');
            
            // Clear form after success
            document.getElementById('forgotPasswordForm').reset();
        } catch (error) {
            console.error("Password reset error:", error);
            
            let errorMessage = "An error occurred while sending the reset email.";
            if (error.code === 'auth/user-not-found') {
                errorMessage = "No user found with this email address.";
            } else if (error.code === 'auth/invalid-email') {
                errorMessage = "The email address is not valid.";
            } else if (error.code === 'auth/too-many-requests') {
                errorMessage = "Too many requests. Please try again later.";
            }
            
            showMessage('message', errorMessage, 'danger');
            document.getElementById('email').classList.add('is-invalid');
        } finally {
            // Reset loading state
            submitBtn.disabled = false;
            spinner.style.display = 'none';
        }
    });

    // Input validation
    document.getElementById('email').addEventListener('input', function() {
        this.classList.remove('is-invalid', 'is-valid');
        document.getElementById('message').classList.add('d-none');
    });
</script>
</body>
</html>